# MySQL에서 지원하는 데이터 형식의 종류

Data Type으로 표현

- 데이터 형식, 데이터형 자료형, 데이터 타입 등 다양하게 불림

데이터 형식에 대한 이해가 필요한 이유

- SELECT문 더욱 잘 활용

- 테이블의 생성 효율적으로 하기위해 필요

- MYSQL 에서 데이터 형식의 종류는 30개 정도

- 중요하고 자주 쓰는 형식에 대해 중점 학습

## 숫자 데이터 형식

(자주 쓰는 것들만 정리)

- **SMALLINT** - 2바이트로 작은 정수

- **INT** - 4바이트 정수

- **BIGINT** - 8바이트 정수

- **FLOAT** - 4바이트 소수점 표현

## 문자 데이터 형식

- **CHAR(n)** - 1~255, 고정길이 문자형

- **VARCHAR(n)** - 1~65535, 가변길이 문자형

- **LONGTEXT** - 최대 4GB 크기의 TEXT 데이터 값

- **LONGBLOB** - 최대 4GB 크기의 BLOB 데이터 값

  (보통 데이터 베이스에 동영상 파일 같은 큰 바이너리 파일을 저장하지 않는다. → 경로만 저장, 원본은 서버에 저장)

## 날짜 데이터 형식

- **DATE** - 3바이트, ‘1001-01-01’

- **DATETIME** - 8바이트, ‘1001-01-01 00:00:00’

``` MySQL
select cast('2024-09-22 09:27:25' as DateTIme);
select cast('2024-09-22 09:27:25' as time);
select cast('2024-09-22 09:27:25' as date);

```

## 기타 데이터 형식

- **GEOMETRY** - N/A, 공간 데이터 형식 (거의 사용하지 않음)

- **JSON** - 8바이트, JSON 문서를 저장

### 변수의 사용

- Workbench를 재시작할 때까지는 계속 유지, 

- Workbench를 닫았다가 재시작하면 소멸
변수의 선언과 값의 대입 형식


``` MySQL
SET @변수이름 = 변수의 값; -– 변수의 선언 및 값 대입
SELECT @변수이름; –- 변수의 값 출력
```

## 데이터 형식과 형 변환

### 데이터 형식 변환 함수

CAST() CONVERT() 함수를 자주 사용

- 데이터 형식 중에서 가능한 것은 BINARY, CHAR, DATE, DATETIME, DECIMAL, JSON, SIGNED INTEGER, TIME, UNSIGNED INTEGER 등

함수 사용법

```MySQL

CAST( expression AS 데이터 형식 [ (길이) ]
CONVERT ( expression, 데이터형식 [ (길이) ]
```

### 암시적인 형 변환

- CAST()나 CONVERT() 함수를 사용하지 않고 형이 변환되는 것

- CONCAT는 두 문자열을 연결해주는 함수로 정수를 입력해도 문자열로 변환되어 처리된다.

------

# MySQL 내장 함수

#제어 흐름 함수

- 프로그램의 흐름 제어

- IF (수식, 참, 거짓)

  - 수식이 참 또는 거짓인지 결과에 따라서 2중 분기
		
  ``` MySQL
  SELECT IF (100>200, ‘참이다’, ‘거짓이다’);
  –- 참이면 앞의 예시를 실행, 거짓이면 뒤의 예시를 실행한다.
  ```

### IFNULL(수식1, 수식2)

- 수식 1이 NULL이 아니면 수식1이 반환되고 수식 1이 NULL이면 수식 2를 반환한다.

### NULLIF(수식1, 수식2)

### CASE ~ WHEN ~ ELSE ~ END

- CASE는 내장 함수는 아니며 연산자로 분류
  
- 다중 분기에 사용되므로 내장함수와 함께 알아두자

``` MySQL
SELECT CASE 10
		WHEN 1 THEN ‘일’
		WHEN 5 THEN ‘오’
		WHEN 10 THEN ‘십’
	ELSE AS ‘CASE연습’;
```

- CASE 뒤의 값이 10이므로 세 번째 WHEN 이 수행되어 ‘십’이 반환

## 문자열 함수

문자열 조작, 활용도 높음

### ASCII (아스키 코드).

- 문자의 아스키 코드값 반환

### CHAR (숫자)

- 숫자의 아스키 코드값에 해당하는 문자 반환

### CONCAT(문자열1, 문자열2)

- 문자열을 이어주는 함수

### FORMAT(숫자, 소수점 자릿수)

- 숫자를 소수점 아래 자리수까지 표현, 1,000단위마다 콤마 표시해 줌

### INSERT(기준 문자열, 위치, 길이 삽입할 문자열)

- 기준 문자열의 위치부터 길이만큼 지우고 삽입할 문자열 끼워 넣음

### LEFT(문자열, 길이), RIGHT(문자열, 길이)

- 왼쪽 또는 오른쪽에서 문자열의 길이만큼 반환

### UPPER(문자열), LOWER(문자열)

- 소문자를 대문자로, 대문자를 소문자로 변경한다.

### LPAD(문자열, 길이, 채울 문자열), RPAD(문자열, 길이, 채울 문자열)

- 문자열의 길이만큼 늘린 후에, 빈 곳을 채울 문자열로 채움

### REPEAT(문자열, 횟수)

- 문자열을 횟수만큼 반복한다.

### REPLACE(문자열, 원래 문자열, 바꿀 문자열)

- 문자열에서 원래 문자열을 찾아서 바꿀 문자열로 바꿔준다.
### REVERSE(문자열)

- 문자열의 순서를 거꾸로 만든다.

### SUBSTRING(문자열, 시작위치, 길이) 또는 SUBSTRING(문자열 FROM 시작위치 FOR 길이)

- 시작 위치부터 길이만큼 문자를 반환한다.

- 길이가 생략되면 문자열의 끝까지 반환한다.

## 수학함수

### ABS(숫자)

- 숫자의 절대값을 계산한다.

### CEILING(숫자), FLOOR(숫자), ROUND(숫자)

- 올림, 내림, 반올림을 계산한다.

### CONV(숫자, 원래 진수, 변환할 진수)

- 숫자를 원래 진수에서 변환할 진수로 계산한다.

### DEGREES(숫자), RADICANS(숫자), PI()

- 라디안 값을 각도값으로, 각도값을 라디안 값으로 변환한다.

- PI()는 파이값인 3.141592를 반환한다.

### POW(숫자1, 숫자2), SQRT(숫자)

- 거듭제곱값 및 제곱근을 구한다

### RAND()

- 0 이상 1 미만의 실수를 구한다.

### SIGN(숫자)

- 숫자가 양수, 0, 음수인지를 구한다.

- 결과는 1, 0, -1 셋 중에 하나를 반환한다.

### TRUNCATE(숫자, 정수)

- 숫자를 소수점을 기준으로 정수 위치까지 구하고 나머지는 버린다.

## 날짜 및 시간 함수

### ADDDATE(날짜, 차이), SUBDATE(날짜, 차이)

- 날짜를 기준으로 차이를 더하거나 뺀 날짜를 구한다.

### CURDATE(), CURTIME(), NOW(), SYSDATE()

- 현재 연-월-일, 현재 시:분:초
  
- NOW()와 SYSDATE()는 현재 ‘연-월-일 시:분:초’

### YEAR(날짜), MONTH(날짜), DAY(날짜), HOUR(시간), MINUTE(시간), SECOND(시간), MICROSECOND(시간)

- 날짜 또는 시간에서 연, 월, 일, 시, 분, 초, 밀리초

### DATE(), TIME()

- DATETIME 형식에서 연-월-일 및 시:분:초만 추출한다.

## 피벗의 구현

- 피벗은 한한열에 포함된 여러 값을 출력하고, 이를 여러 열로 변환하여 테이블 반환 식을 회전하고 필요하면 집계까지 수행하는 것

## 조인

- 두 개 이상의 테이블을 서로 묶어서 하나의 결과 집합으로 만들어 내는것

- 종류 : INNER JOIN, OUTER JOIN, CROSS JOIN, SELF JOIN

## 데이터베이스의 테이블

- 중복과 공간 낭비를 피하고 데이터의 무결성을 위해서 여러개의 테이블로 분리하여 저장한다.

- 이 분리된 테이블들을 서로 관계를 맺고 있다.

### INNER JOIN(내부 조인)

- 조인 중에서 가장 많이 사용되는 조인

- 대개의 업무에서 사용되는 조인 (일반적으로 JOIN 이라고 얘기하는 것은 INNER JOIN을 지칭)

- JOIN 만 써도 INNER JOIN으로 인식함.

```MySQL
SELECT <열 목록>
FROM <첫 번째 테이블>
	INNER JOIN <두 번째 테이블>
	ON <조인될 조건>
[WHERE 검색 조건]
```

### OUTER JOIN (외부 조인)

- 조인의 조건에 만족되지 않는 행까지도 포합시키는 것

### LEFT OUTER JOIN

- 왼쪽 테이블의 것은 모두 출력되어 한다 로 이해

- 줄여서 LEFT JOIN으로 쓸 수 있음

### RIGHT OUTER JOIN
- 오른쪽 테이블의 것은 모두 출력되어 한다 로 이해

### CROSS JOIN (상호 조인)

- 한쪽 테이블의 모든 행들과 다른 쪽 테이블의 모든 행을 조인시키는 기능을 한다.

- CROSS JOIN의 결과 개수는 두 테이블 개수를 곱한 개수가 된다.

- ON 구문을 사용할 수 없음

### SELF JOIN (자체 조인)

- 별도의 구문이 있는 것이 아니라 자기 자신과 자기 자신이 조인한다는 의미

### UNION / UNION ALL / NOT IN / IN

- UNION - 두 쿼리의 결과를 행으로 합치는 것을 의미

- UNION ALL - 중복된 열까지 모두 출력

- NOT IN - 첫 번째 쿼리의 결과중에서, 두 번째 쿼리에 해당하는 것을 제외하기 위한 구문

- IN - NOT IN과 반대로 첫 번째 쿼리의 결과 중 두번째 쿼리에 해당되는 것만 조회
